{"version":3,"file":"index.js","sources":["../../../packages/locale/lang/zh-CN.ts","../../../packages/locale/index.ts","../../../packages/utils/create/i18n.ts","../../../packages/utils/create/index.ts","../../../packages/components/popup/src/index.vue?vue&type=template&lang.js","../../../packages/components/popup/src/index.vue"],"sourcesContent":["export default {\n  common: {\n    searchPlaceholder: '请输入搜索关键词',\n  },\n  mbPopup: {\n    test: '测试',\n    sure: '确定',\n  },\n}\n","// @ts-ignore\r\nimport Locale from 'vant/lib/locale/index'\r\nimport defaultMessages from './lang/zh-CN'\r\n\r\nLocale.add({\r\n  'zh-CN': defaultMessages,\r\n})\r\n\r\nexport default Locale\r\n","// @ts-ignore\r\nimport { get, isFunction } from 'vant/lib/utils/index'\r\n// @ts-ignore\r\nimport { camelize } from 'vant/lib/utils/format/string'\r\n// @ts-ignore\r\nimport Locale from '@/locale/index'\r\n\r\nexport function createI18N(name: string) {\r\n  const prefix = camelize(name) + '.'\r\n\r\n  return function (path: string, ...args: any[]): string {\r\n    const messages = Locale.messages()\r\n    const message = get(messages, prefix + path) || get(messages, path)\r\n\r\n    return isFunction(message) ? message(...args) : message\r\n  }\r\n}\r\n\r\nexport type Translate = ReturnType<typeof createI18N>\r\n","// @ts-ignore\r\nimport { createBEM, BEM } from 'vant/lib/utils/create/bem'\r\n// @ts-ignore\r\nimport { createComponent } from 'vant/lib/utils/create/component'\r\nimport { createI18N, Translate } from './i18n'\r\n\r\ntype CreateNamespaceReturn = [\r\n  ReturnType<typeof createComponent>,\r\n  BEM,\r\n  Translate\r\n]\r\n\r\nexport function createNamespace(name: string): CreateNamespaceReturn {\r\n  name = 'mb-' + name\r\n  const bem = createBEM(name)\r\n  const t = createI18N(name)\r\n  return [\r\n    function defineComponent(sfc: any) {\r\n      const comp = createComponent(name)(sfc)\r\n      const methods = comp.methods || {}\r\n      methods.$bem = bem\r\n      methods.$translate = t\r\n      comp.methods = methods\r\n      return comp\r\n    },\r\n    bem,\r\n    t,\r\n  ]\r\n}\r\n","\n<van-popup\n  :class=\"$bem()\"\n  v-bind=\"$attrs\"\n  :close-icon=\"closeIcon\"\n  v-on=\"$listeners\"\n  ref=\"popupRef\"\n>\n  <div v-if=\"showHeader\" :class=\"$bem('header')\">\n    <div :class=\"$bem('header-left')\" @click=\"handleClickIconClose\">\n      <slot name=\"header-left\">\n        <van-icon\n          role=\"button\"\n          tabindex=\"0\"\n          :name=\"closeIcon\"\n          :size=\"closeIconSize\"\n          :color=\"closeIconColor\"\n        />\n      </slot>\n    </div>\n    <div :class=\"[$bem('header-center'), 'van-ellipsis']\">\n      <slot name=\"header-center\">\n        <span>{{ title }}</span>\n      </slot>\n    </div>\n    <div :class=\"$bem('header-right')\" @click=\"handleClickSure\">\n      <slot name=\"header-right\">\n        <span>{{ $translate('mbPopup.sure') }}</span>\n      </slot>\n    </div>\n  </div>\n  <div v-if=\"showSearch\" :class=\"$bem('search')\">\n    <van-search\n      v-model=\"searchValue\"\n      v-bind=\"searchProps\"\n      v-on=\"searchEvents\"\n    >\n      <template v-for=\"slotName in searchSlotNames\" :slot=\"slotName\">\n        <slot :name=\"slotName\" />\n      </template>\n    </van-search>\n  </div>\n  <div :class=\"$bem('content')\">\n    <slot />\n  </div>\n</van-popup>\n","<template>\r\n  <van-popup\r\n    :class=\"$bem()\"\r\n    v-bind=\"$attrs\"\r\n    :close-icon=\"closeIcon\"\r\n    v-on=\"$listeners\"\r\n    ref=\"popupRef\"\r\n  >\r\n    <div v-if=\"showHeader\" :class=\"$bem('header')\">\r\n      <div :class=\"$bem('header-left')\" @click=\"handleClickIconClose\">\r\n        <slot name=\"header-left\">\r\n          <van-icon\r\n            role=\"button\"\r\n            tabindex=\"0\"\r\n            :name=\"closeIcon\"\r\n            :size=\"closeIconSize\"\r\n            :color=\"closeIconColor\"\r\n          />\r\n        </slot>\r\n      </div>\r\n      <div :class=\"[$bem('header-center'), 'van-ellipsis']\">\r\n        <slot name=\"header-center\">\r\n          <span>{{ title }}</span>\r\n        </slot>\r\n      </div>\r\n      <div :class=\"$bem('header-right')\" @click=\"handleClickSure\">\r\n        <slot name=\"header-right\">\r\n          <span>{{ $translate('mbPopup.sure') }}</span>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"showSearch\" :class=\"$bem('search')\">\r\n      <van-search\r\n        v-model=\"searchValue\"\r\n        v-bind=\"searchProps\"\r\n        v-on=\"searchEvents\"\r\n      >\r\n        <template v-for=\"slotName in searchSlotNames\" :slot=\"slotName\">\r\n          <slot :name=\"slotName\" />\r\n        </template>\r\n      </van-search>\r\n    </div>\r\n    <div :class=\"$bem('content')\">\r\n      <slot />\r\n    </div>\r\n  </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport { Popup, Icon, Search } from 'vant'\r\nimport { createNamespace } from '@/utils/create/index'\r\nconst [defineComponent, bem, t] = createNamespace('popup')\r\n\r\nconst eventsExclude = [\r\n  'default',\r\n  'header-left',\r\n  'header-center',\r\n  'header-right',\r\n]\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    VanPopup: Popup,\r\n    VanIcon: Icon,\r\n    VanSearch: Search,\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    showHeader: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    closeIcon: {\r\n      type: String,\r\n      default: 'cross',\r\n    },\r\n    closeIconSize: {\r\n      type: [Number, String],\r\n      default: '20',\r\n    },\r\n    closeIconColor: {\r\n      type: String,\r\n      default: '#bfbfbf',\r\n    },\r\n    showSearch: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    searchProps: {\r\n      type: Object,\r\n      default: () => ({\r\n        placeholder: t('common.searchPlaceholder'),\r\n      }),\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      searchValue: '',\r\n    }\r\n  },\r\n  computed: {\r\n    searchSlotNames() {\r\n      return Object.keys(this.$slots).filter((_) => !eventsExclude.includes(_))\r\n    },\r\n  },\r\n  methods: {\r\n    close() {\r\n      const { popupRef } = this.$refs\r\n      popupRef.close()\r\n    },\r\n    handleClickIconClose() {\r\n      this.close()\r\n    },\r\n    handleClickSure(evt) {\r\n      this.close()\r\n      this.onSure(evt)\r\n    },\r\n  },\r\n  beforeCreate() {\r\n    const createEmitter = (eventName) => (event) => this.$emit(eventName, event)\r\n\r\n    this.onSure = createEmitter('sure')\r\n\r\n    // search\r\n    this.searchEvents = {\r\n      search: createEmitter('search'),\r\n      input: createEmitter('search-input'),\r\n      focus: createEmitter('focus'),\r\n      blur: createEmitter('blur'),\r\n      clear: createEmitter('clear'),\r\n      cancel: createEmitter('cancel'),\r\n    }\r\n  },\r\n  mounted() {},\r\n})\r\n</script>\r\n"],"names":[],"mappings":"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"}